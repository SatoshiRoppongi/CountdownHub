# テストデータ生成スクリプト

## 概要

CountdownHubプロジェクトのローカル環境に大量のテストデータを生成するスクリプトです。

## 生成されるデータ

### ユーザー
- **管理者**: 1人
  - Email: `admin@countdownhub.com`
  - Password: `admin123`
  - Username: `admin`
  - 表示名: `管理者`

- **一般ユーザー**: 14人
  - 日本語の名前とユーザー名
  - ローカル認証とGoogle認証のユーザーを混在
  - リアルなプロフィール画像URL

### イベント
- **件数**: 80件
- **期間**: 過去1年〜未来1年の範囲でランダム
- **内容**: 
  - プログラミング勉強会
  - 季節イベント（桜まつり、花火大会など）
  - 技術セミナー
  - 交流会・パーティー
- **詳細**:
  - 日本語のタイトルと説明文
  - リアルな開催場所（東京、大阪、名古屋など）
  - オンライン/オフライン/ハイブリッドの開催形式
  - 関連タグ（1〜5個）
  - イベント画像URL（一部）

### コメント
- **各イベントに2〜10個のコメント**
- 日本語の自然なコメント内容
- 参加者からの質問や感想
- 一部通報されたコメント（5%の確率）

### お気に入り
- **各ユーザーが5〜19個のイベントをお気に入り登録**
- ランダムな組み合わせで重複なし

### お知らせ
- **8件の管理者からのお知らせ**
- システムメンテナンス、新機能リリースなど
- 異なる種類と優先度
- 表示期間の設定

### お問い合わせ
- **12件のお問い合わせ**
- ログイン問題、機能要望、バグ報告など
- 異なるカテゴリーとステータス

### 通知
- **各ユーザーに3〜10個の通知**
- イベント開始通知、コメント通知など
- 既読/未読の設定
- 有効期限の設定（一部）

## 実行方法

### 1. 前提条件

```bash
# データベースが起動していることを確認
docker-compose up -d db

# Prismaクライアントが最新であることを確認
cd backend
npm run db:generate
```

### 2. テストデータ生成の実行

```bash
# backendディレクトリで実行
cd backend
npm run db:seed-test
```

### 3. 実行結果の確認

スクリプト実行後、以下のような統計情報が表示されます：

```
✅ テストデータの生成が完了しました！
📊 生成されたデータ:
   👥 ユーザー: 15人
   📅 イベント: 80件
   💬 コメント: 400件
   ⭐ お気に入り: 180件
   📢 お知らせ: 8件
   📞 お問い合わせ: 12件
   🔔 通知: 75件

🔑 管理者アカウント情報:
   Email: admin@countdownhub.com
   Password: admin123
```

### 4. データの確認

```bash
# Prisma Studioでデータを確認
npm run db:studio
```

ブラウザで `http://localhost:5555` を開いてデータベースの内容を確認できます。

## 注意事項

### ⚠️ データの削除
スクリプト実行時に**既存のデータはすべて削除**されます。本番環境では絶対に実行しないでください。

### 🔄 再実行
スクリプトは何度でも実行可能です。実行のたびに新しいランダムなデータが生成されます。

### 🎯 カスタマイズ
スクリプト内の配列データ（イベント名、ユーザー名など）を編集することで、生成されるデータをカスタマイズできます。

## 開発での活用方法

### フロントエンド開発
- 大量のイベントデータでページネーションの動作確認
- 検索・フィルタリング機能のテスト
- 様々なデータパターンでのUIテスト

### バックエンド開発
- API のパフォーマンステスト
- 大量データでのクエリ最適化
- 権限制御の動作確認

### 総合テスト
- ユーザーフローの確認
- 通知機能の動作テスト
- 管理者機能のテスト

## トラブルシューティング

### データベース接続エラー
```bash
# データベースコンテナの状態確認
docker-compose ps

# データベースの再起動
docker-compose restart db
```

### Prismaクライアントエラー
```bash
# Prismaクライアントの再生成
npm run db:generate
```

### TypeScriptエラー
```bash
# 型チェック
npm run typecheck
```

## ファイル構成

```
backend/src/scripts/
├── seedTestData.ts    # メインスクリプト
└── README.md         # このファイル
```