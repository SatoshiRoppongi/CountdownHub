# CountdownHub - プロジェクトコンテキスト

## プロジェクトの背景と目的

**CountdownHub** は、日本全国のイベントをカウントダウン形式で表示するWebサービスのMVP（最小実行可能製品）です。

### 解決したい課題
- イベント情報の散在化
- 開催時期の把握の困難さ
- リアルタイムでの残り時間の可視化

### ターゲットユーザー
- イベント参加者（一般ユーザー）
- イベント主催者・運営者
- イベント情報管理者

## 技術選択の理由

### フロントエンド技術選択
- **React + TypeScript**: 型安全性とコンポーネント再利用性を重視
- **Tailwind CSS**: 迅速なUI構築とレスポンシブデザイン対応
- **React Query**: データフェッチングとキャッシュ管理の効率化

### バックエンド技術選択
- **Node.js + Express**: JavaScriptエコシステムでの統一
- **PostgreSQL**: リレーショナルデータの整合性とパフォーマンス
- **Prisma ORM**: 型安全なデータベースアクセスとマイグレーション管理

### 開発環境
- **Docker**: 環境統一と開発効率の向上
- **TypeScript**: フロントエンド・バックエンド共通の型安全性

## プロジェクト制約

### 技術的制約
- Node.js 18以上必須
- PostgreSQL使用（他DBとの互換性は考慮しない）
- モバイルファースト設計（320px以上対応）
- リアルタイムカウントダウン（1秒間隔更新）

### 機能的制約
- 認証機能はMVPには含まない
- 外部API連携は将来拡張
- 管理者機能は基本的なCRUD操作のみ
- セキュリティはXSS・SQLインジェクション対策を最優先

### 運用制約
- 開発期間重視（品質とのバランス）
- 拡張性を考慮した設計（ただし過度な抽象化は避ける）
- コスト効率を重視した実装

## 開発方針

### コード品質
- TypeScript strict mode必須
- ESLint + Prettier設定済み
- コンポーネント単位での開発
- 再利用可能な設計

### セキュリティ方針
- 入力値検証を全てのエンドポイントで実施
- Prisma ORMによるSQLインジェクション対策
- HTMLエスケープによるXSS対策
- 機密情報は環境変数で管理

### パフォーマンス方針
- ページ初期表示2秒以内
- API レスポンス500ms以内
- データベースインデックス最適化
- React Queryによるキャッシュ活用

## データ設計の考慮点

### Events テーブル設計
- `tags`フィールドはPostgreSQLの配列型を使用
- `venue_type`で開催形式を管理（online/offline/hybrid）
- `is_active`による論理削除対応
- タイムゾーン対応（WITH TIME ZONE）

### Comments テーブル設計
- `is_reported`による通報機能対応
- カスケード削除でイベント削除時の整合性確保
- 著者名は匿名可能（認証機能なしのため）

## API設計方針

### RESTful設計
- 標準的なHTTPメソッド使用
- リソース中心の URL設計
- ステータスコードの適切な使用

### エラーハンドリング
- 統一されたエラーレスポンス形式
- ログ出力による問題追跡
- ユーザーフレンドリーなエラーメッセージ

## UI/UX設計原則

### カウントダウン表示
- 緊急度による色分け表示
  - 7日以上: 青系（#3B82F6）
  - 3-7日: 黄系（#F59E0B）
  - 1-3日: オレンジ系（#F97316）
  - 24時間以内: 赤系（#EF4444）

### レスポンシブデザイン
- モバイルファースト設計
- ブレークポイント: 768px（タブレット）、1024px（デスクトップ）
- タッチインターフェース対応

## 運用・保守の考慮

### 監視・ログ
- 構造化ログ出力
- エラー追跡機能
- パフォーマンス監視準備

### 拡張性
- マイクロサービス化への準備
- 外部API連携の準備
- ユーザー認証機能追加の準備

## 開発フロー

### Git運用
- main: 本番環境用
- develop: 開発統合用
- feature/: 機能開発用

### 品質保証
- Pull Request必須
- TypeScript型チェック
- ESLint/Prettierチェック
- 基本的なテスト実装

この文書は、Claude Codeでの開発時に技術的判断の基準として活用し、プロジェクトの一貫性を保つために使用します。